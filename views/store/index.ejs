<%- include('../partials/head') %>
</head>
<body class="bg-light">
  <%- include('../partials/nav') %>

  <main class="container py-5">
    <div class="text-center mb-5">
      <h2 class="text-danger fw-bold display-5">Welcome to Index Page</h2>
      <p class="text-muted">Browse our registered homes and book your stay!</p>
    </div>

    <div class="row g-4 justify-content-center">
      <% registeredHomes.forEach((home, index) => { %>
      <div class="col-12 col-sm-6 col-lg-4">
        <div class="card h-100 shadow-sm border-0 card-hover">
          <img 
            src="<%= home.photo %>" 
            class="card-img-top img-hover cursor-pointer"
            alt="<%= home.houseName %>"
            data-bs-toggle="modal"
            data-bs-target="#photoModal<%= index %>"
          >
          <div class="card-body d-flex flex-column">
            <h5 class="card-title fw-semibold"><%= home.houseName %></h5>
            <p class="card-text text-muted mb-2">
              <i class="fas fa-map-marker-alt me-2 text-danger"></i><%= home.location %>
            </p>
            <div class="d-flex justify-content-between align-items-center mb-3">
              <span class="text-danger fw-bold">Rs <%= home.price %> / night</span>
              <span class="text-warning fw-bold">‚≠ê <%= home.rating %></span>
            </div>
            <a href="#" class="btn btn-success mt-auto rounded-3">Book</a>
          </div>
        </div>
      </div>

      <!-- Modal for full photo -->
      <div class="modal fade" id="photoModal<%= index %>" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
          <div class="modal-content">
            <div class="modal-header border-0">
              <h5 class="modal-title"><%= home.houseName %></h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-0">
              <img src="<%= home.photo %>" class="img-fluid w-100" alt="<%= home.houseName %>">
            </div>
          </div>
        </div>
      </div>
      <% }) %>
    </div>
  </main>

  <!-- Font Awesome CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
  <!-- Bootstrap JS Bundle CDN -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <style>
    .card-hover:hover {
      box-shadow: 0 0.75rem 1.5rem rgba(0,0,0,0.2);
      transition: box-shadow 0.3s ease-in-out;
    }
    .img-hover {
      object-fit: cover;
      height: 220px;
      width: 100%;
      transition: transform 0.3s ease;
      cursor: pointer;
    }
    .card-hover:hover .img-hover {
      transform: scale(1.05);
    }
    .btn {
      border-radius: 0.75rem;
    }
  </style>
</body>
</html>
